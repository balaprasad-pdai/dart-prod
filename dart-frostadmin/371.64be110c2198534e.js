"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[371],{64371:(Ae,J,u)=>{u.r(J),u.d(J,{UsersModule:()=>A});var f=u(36895),x=u(85892),d=u(24006),N=u(61135),Q=u(77579),R=u(39646),L=u(18505),$=u(78372),z=u(63900),D=u(91005),e=u(94650),G=u(80529);let P;class Z{constructor(n,t){this.pipe=n,this.http=t,this._loading$=new N.X(!0),this._search$=new Q.x,this._filteredData$=new N.X([]),this._total$=new N.X(0),this._state={page:1,pageSize:8,searchTerm:"",sortColumn:"",sortDirection:"",startIndex:0,endIndex:9,totalRecords:0,status:"",payment:"",date:""},this.cities=[{id:1,name:"Kannur",state:"Kerala"},{id:2,name:"Kochi",state:"Kerala"},{id:3,name:"Chalakudi",state:"Kerala"}],this.saveCity=s=>this.http.post("/api/city",s,{headers:P}),this.getCities=()=>this.http.get("/api/city",{headers:P}),this.deleteCity=s=>this.http.delete(`/api/city/${s}`,{headers:P}),this.getSelectedCityDetail=s=>this.http.get(`/api/city/${s}`,{headers:P}),this.updateCityDetail=(s,r)=>this.http.patch(`/api/city/${r}`,s,{headers:P}),this._search$.pipe((0,L.b)(()=>this._loading$.next(!0)),(0,$.b)(200),(0,z.w)(()=>this._search()),(0,D.g)(200),(0,L.b)(()=>this._loading$.next(!1))).subscribe(s=>{this._filteredData$.next(s.filteredData),this._total$.next(s.total)}),this._search$.next()}get filteredData$(){return this._filteredData$.asObservable()}get product(){return this.products}get total$(){return this._total$.asObservable()}get loading$(){return this._loading$.asObservable()}get page(){return this._state.page}get pageSize(){return this._state.pageSize}get searchTerm(){return this._state.searchTerm}get startIndex(){return this._state.startIndex}get endIndex(){return this._state.endIndex}get totalRecords(){return this._state.totalRecords}get status(){return this._state.status}get payment(){return this._state.payment}get date(){return this._state.date}set page(n){this._set({page:n})}set pageSize(n){this._set({pageSize:n})}set searchTerm(n){this._set({searchTerm:n})}set sortColumn(n){this._set({sortColumn:n})}set sortDirection(n){this._set({sortDirection:n})}set startIndex(n){this._set({startIndex:n})}set endIndex(n){this._set({endIndex:n})}set totalRecords(n){this._set({totalRecords:n})}set status(n){this._set({status:n})}set payment(n){this._set({payment:n})}set date(n){this._set({date:n})}_set(n){Object.assign(this._state,n),this._search$.next()}_search(){const{sortColumn:n,sortDirection:t,page:r,searchTerm:a}=this._state;let m=function j(i,n,t){return""===t||""===n?i:[...i].sort((s,r)=>{const a=((i,n)=>i<n?-1:i>n?1:0)(s[n],r[n]);return"asc"===t?a:-a})}(this.cities,n,t);m=m.filter(p=>function H(i,n,t){return i.name.toLowerCase().includes(n.toLowerCase())}(p,a));const g=m.length;return this.totalRecords=m.length,this._state.startIndex=(r-1)*this.pageSize+1,this._state.endIndex=(r-1)*this.pageSize+this.pageSize,this.endIndex>this.totalRecords&&(this.endIndex=this.totalRecords),m=m.slice(this._state.startIndex-1,this._state.endIndex),(0,R.of)({filteredData:m,total:g})}}Z.\u0275fac=function(n){return new(n||Z)(e.LFG(f.JJ),e.LFG(G.eN))},Z.\u0275prov=e.Yz7({token:Z,factory:Z.\u0275fac,providedIn:"root"});var q=u(20388),I=u(32521),M=u(29234),F=u(90702);function E(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"th",15)(2,"div",16),e._UZ(3,"label",17),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA()()),2&i){const t=n.$implicit;e.xp6(5),e.Oqu(t.slNo),e.xp6(2),e.Oqu(t.fullname),e.xp6(2),e.Oqu(t.username),e.xp6(2),e.Oqu(t.emailid)}}function V(i,n){1&i&&(e.TgZ(0,"span")(1,"p",45),e._uU(2,"Characters Only"),e.qZA()())}function W(i,n){1&i&&(e.TgZ(0,"span")(1,"p",45),e._uU(2,"Invalid Username"),e.qZA()())}function X(i,n){1&i&&(e.TgZ(0,"span")(1,"p",45),e._uU(2,"Invalid Password"),e.qZA()())}function ee(i,n){1&i&&(e.TgZ(0,"span")(1,"p",45),e._uU(2,"Invalid Email Id"),e.qZA()())}function te(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",24)(1,"h5",25),e._uU(2,"Add Admin Users"),e.qZA(),e.TgZ(3,"button",26),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(null==r.modalRef?null:r.modalRef.hide())}),e.qZA()(),e.TgZ(4,"form",27)(5,"div",28),e._UZ(6,"input",29),e.TgZ(7,"div",30)(8,"label",31),e._uU(9,"Name"),e.qZA(),e._UZ(10,"input",32),e.YNc(11,V,3,0,"span",33),e.qZA(),e.TgZ(12,"div",30)(13,"label",34),e._uU(14,"Username"),e.qZA(),e._UZ(15,"input",35),e.YNc(16,W,3,0,"span",33),e.qZA(),e.TgZ(17,"div",30)(18,"label",34),e._uU(19,"Password"),e.qZA(),e._UZ(20,"input",36),e.YNc(21,X,3,0,"span",33),e.qZA(),e.TgZ(22,"div",30)(23,"label",34),e._uU(24,"Email"),e.qZA(),e._UZ(25,"input",37),e.YNc(26,ee,3,0,"span",33),e.qZA(),e.TgZ(27,"div",30)(28,"label",38),e._uU(29,"Roles & Permissions"),e.qZA(),e._UZ(30,"ng-select",39),e.qZA(),e.TgZ(31,"div",30)(32,"label",38),e._uU(33,"Profile Image"),e.qZA(),e._UZ(34,"input",40),e.qZA()(),e.TgZ(35,"div",41)(36,"div",42)(37,"button",43),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(null==r.modalRef?null:r.modalRef.hide())}),e._uU(38," Close "),e.qZA(),e.TgZ(39,"button",44),e._uU(40,"Add"),e.qZA()()()()}if(2&i){const t=e.oxw();let s,r,a,o;e.xp6(4),e.Q6J("formGroup",t.adminForm),e.xp6(7),e.Q6J("ngIf",(null==(s=t.adminForm.get("name"))?null:s.errors)&&(null==(s=t.adminForm.get("name"))?null:s.touched)),e.xp6(5),e.Q6J("ngIf",(null==(r=t.adminForm.get("username"))?null:r.errors)&&(null==(r=t.adminForm.get("username"))?null:r.touched)),e.xp6(5),e.Q6J("ngIf",(null==(a=t.adminForm.get("password"))?null:a.errors)&&(null==(a=t.adminForm.get("password"))?null:a.touched)),e.xp6(5),e.Q6J("ngIf",(null==(o=t.adminForm.get("email"))?null:o.errors)&&(null==(o=t.adminForm.get("email"))?null:o.touched)),e.xp6(4),e.Q6J("items",t.roles)}}class U{constructor(n,t,s,r){this.router=n,this.modalService=t,this.fb=s,this.service=r,this.submitted=!1,this.data=[{slNo:"1",fullname:"demotestuser",username:"demotestuser",emailid:"demotestuser@gmail.com"},{slNo:"2",fullname:"demo",username:"demo",emailid:"demo@example.com"},{slNo:"3",fullname:"admin",username:"admin",emailid:"admin@example.com"}],this.roles=[{name:"Admin"},{name:"Super Admin"},{name:"Sub Admin"}],this.adminForm=this.fb.group({email:["",[d.kI.required,d.kI.email,d.kI.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")]],name:["",[d.kI.required,d.kI.pattern("[A-Za-z]+")]],password:["",[d.kI.required,d.kI.pattern("(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[$@$!%*?&])[A-Za-zd$@$!%*?&].{8,}")]],username:["",[d.kI.required,d.kI.pattern("^[a-z0-9_-]{8,15}$")]],ids:[""]}),this.total=r.total$}ngOnInit(){this.breadCrumbItems=[{label:"Users"},{label:"Admin",active:!0}]}openModal(n){this.submitted=!1,this.modalRef=this.modalService.show(n,{class:"modal-md"})}}U.\u0275fac=function(n){return new(n||U)(e.Y36(x.F0),e.Y36(q.tT),e.Y36(d.qu),e.Y36(Z))},U.\u0275cmp=e.Xpm({type:U,selectors:[["app-admin"]],features:[e._Bn([Z,f.JJ])],decls:34,vars:6,consts:[[1,"container-fluid"],["title","Admin Users",3,"breadcrumbItems"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"row","mb-2"],[1,"col-sm-4"],[1,"search-box","me-2","mb-2","d-inline-block"],[1,"position-relative"],["type","text","placeholder","Search...",1,"form-control"],[1,"bx","bx-search-alt","search-icon"],[1,"table-responsive","mb-0"],[1,"table","table-centered","table-nowrap"],[1,"table-light"],[2,"width","20px"],[1,"form-check","font-size-16","align-middle"],["for","transactionCheck01",1,"form-check-label"],[1,"align-middle"],[4,"ngFor","ngForOf"],[1,"pagination","pagination-rounded","justify-content-end","mb-2"],[3,"totalItems","ngModel","ngModelChange"],["role","document"],["content",""],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","close-modal",1,"btn-close",3,"click"],[3,"formGroup"],[1,"modal-body"],["type","hidden","name","id","value","","formControlName","ids"],[1,"mb-3"],["for","state-field",1,"form-label"],["formControlName","name","type","text","id","customername-field","placeholder","","required","",1,"form-control"],[4,"ngIf"],["for","commentmessage-input"],["formControlName","username","type","text","id","customername-field","placeholder","","required","",1,"form-control"],["formControlName","password","type","text","id","customername-field","placeholder","","required","",1,"form-control"],["formControlName","email","type","text","id","customername-field","placeholder","","required","",1,"form-control"],["for","payment-field",1,"form-label"],["bindLabel","name","placeholder","Select any roles",3,"items"],["type","file","id","file",1,"form-control"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button","data-bs-dismiss","modal",1,"btn","btn-light",3,"click"],["type","submit","id","add-btn",1,"btn","btn-success"],[1,"text-danger"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"app-page-title",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),e._UZ(10,"input",10)(11,"i",11),e.qZA()()()(),e.TgZ(12,"div",12)(13,"table",13)(14,"thead",14)(15,"tr")(16,"th",15)(17,"div",16),e._UZ(18,"label",17),e.qZA()(),e.TgZ(19,"th",18),e._uU(20,"#"),e.qZA(),e.TgZ(21,"th",18),e._uU(22,"Full Name"),e.qZA(),e.TgZ(23,"th",18),e._uU(24,"User Name"),e.qZA(),e.TgZ(25,"th",18),e._uU(26,"Email ID"),e.qZA()()(),e.TgZ(27,"tbody"),e.YNc(28,E,12,4,"tr",19),e.qZA()()(),e.TgZ(29,"ul",20)(30,"pagination",21),e.NdJ("ngModelChange",function(r){return t.service.page=r}),e.ALo(31,"async"),e.qZA()()()()()()(),e.YNc(32,te,41,6,"ng-template",22,23,e.W1O)),2&n&&(e.xp6(1),e.Q6J("breadcrumbItems",t.breadCrumbItems),e.xp6(27),e.Q6J("ngForOf",t.data),e.xp6(2),e.Q6J("totalItems",e.lcZ(31,4,t.total))("ngModel",t.service.page))},dependencies:[f.sg,f.O5,I.Qt,d._Y,d.Fj,d.JJ,d.JL,d.Q7,d.sg,d.u,d.On,M.V,F.w9,f.Ov]});var v=u(15861),k=u(31545),ne=u(35226),C=u.n(ne),oe=u(6162),B=u(18987);function ie(i,n){1&i&&e._UZ(0,"app-loader")}function re(i,n){1&i&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",23),e._uU(3,"No Staffs list."),e.qZA()(),e.BQk())}function se(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"td")(11,"div",24)(12,"input",25),e.NdJ("ngModelChange",function(r){const o=e.CHM(t).index,l=e.oxw();return e.KtG(l.statusBoolean[(l.currentPage-1)*l.itemsPerPage+o]=r)})("click",function(){const r=e.CHM(t),a=r.$implicit,o=r.index,l=e.oxw();return e.KtG(l.updateStatus(a,(l.currentPage-1)*l.itemsPerPage+o))}),e.qZA()()(),e.TgZ(13,"td")(14,"div",26)(15,"a",27),e.NdJ("click",function(){const a=e.CHM(t).$implicit,o=e.oxw(),l=e.MAs(36);return e.KtG(o.editDataGet(a,l))}),e._UZ(16,"i",28),e.qZA(),e.TgZ(17,"a",29),e.NdJ("click",function(){const a=e.CHM(t).$implicit,o=e.oxw();return e.KtG(o.delete(a.id))}),e._UZ(18,"i",30),e.qZA()()()()}if(2&i){const t=n.$implicit,s=n.index,r=e.oxw();e.xp6(2),e.Oqu((r.currentPage-1)*r.itemsPerPage+s+1),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.Oqu(r.getAtob(null==t?null:t.username)),e.xp6(2),e.Oqu(e.xi3(9,5,t.createdAt,"longDate")),e.xp6(4),e.Q6J("ngModel",r.statusBoolean[(r.currentPage-1)*r.itemsPerPage+s])}}function ae(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Staff Name is required "),e.qZA())}function le(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Letters and spaces only "),e.qZA())}function de(i,n){if(1&i&&(e.TgZ(0,"div",52),e.YNc(1,ae,2,0,"div",0),e.YNc(2,le,2,0,"div",0),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.form.name.errors.required),e.xp6(1),e.Q6J("ngIf",t.form.name.errors.pattern)}}function ce(i,n){if(1&i&&(e.TgZ(0,"div",53),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" +91",t.form.username.value," ")}}const O=function(i){return{"is-invalid":i}};function ue(i,n){if(1&i&&(e.TgZ(0,"div",54)(1,"span",55),e._uU(2,"+91"),e.qZA(),e._UZ(3,"input",56),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(1,O,t.submitted&&t.form.username.errors))}}function me(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Phone number is required "),e.qZA())}function pe(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1,"Numbers only"),e.qZA())}function fe(i,n){if(1&i&&(e.TgZ(0,"div",52),e.YNc(1,me,2,0,"div",0),e.YNc(2,pe,2,0,"div",0),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.form.username.errors.required),e.xp6(1),e.Q6J("ngIf",t.form.username.errors.pattern)}}function ge(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"input",57),e.NdJ("change",function(r){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onAccept(r))}),e.qZA()}}function he(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",58)(1,"button",59),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.removeImage())}),e.TgZ(2,"span"),e._uU(3,"\xd7"),e.qZA()(),e._UZ(4,"img",60),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(4),e.s9C("src",t.form.photoUrl.value,e.LSH)}}function _e(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",31)(1,"h5",32),e._uU(2,"Add/ Edit Staff"),e.qZA(),e.TgZ(3,"button",33),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(null==r.modalRef?null:r.modalRef.hide())}),e.qZA()(),e.TgZ(4,"form",34),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.saveStaff())}),e.TgZ(5,"div",35),e._UZ(6,"input",36),e.TgZ(7,"div",37)(8,"label",38),e._uU(9,"Name"),e.qZA(),e._UZ(10,"input",39),e.YNc(11,de,3,2,"div",40),e.qZA(),e.TgZ(12,"div",37)(13,"label",41),e._uU(14,"Mobile Number"),e.qZA(),e.YNc(15,ce,2,1,"div",42),e.YNc(16,ue,4,3,"div",43),e.YNc(17,fe,3,2,"div",40),e.qZA(),e.TgZ(18,"div",37)(19,"label",44),e._uU(20,"Verification status"),e.qZA(),e.TgZ(21,"div",24),e._UZ(22,"input",45),e.qZA()(),e.TgZ(23,"div",37)(24,"label",44),e._uU(25,"Staff Image"),e.qZA(),e._UZ(26,"br"),e.YNc(27,ge,1,0,"input",46),e.YNc(28,he,5,1,"div",47),e.qZA()(),e.TgZ(29,"div",48)(30,"div",49)(31,"button",50),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(null==r.modalRef?null:r.modalRef.hide())}),e._uU(32," Close "),e.qZA(),e.TgZ(33,"button",51),e._uU(34,"Add"),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("formGroup",t.serviceProviderForm),e.xp6(6),e.Q6J("ngClass",e.VKq(8,O,t.submitted&&t.form.name.errors)),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.form.name.errors),e.xp6(4),e.Q6J("ngIf",t.form.ids.value),e.xp6(1),e.Q6J("ngIf",!t.form.ids.value),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.form.username.errors),e.xp6(10),e.Q6J("ngIf",t.upload),e.xp6(1),e.Q6J("ngIf",!t.upload)}}class y{constructor(n,t,s,r,a){var o=this;this.router=n,this.modalService=t,this.fb=s,this.service=r,this.utilService=a,this.submitted=!1,this.showLoader=!1,this.staffList=[],this.slicedStaffList=[],this.image="",this.file="",this.upload=!0,this.activeStatus=!0,this.saveStaff=(0,v.Z)(function*(){if(o.submitted=!0,o.serviceProviderForm.valid){o.showLoader=!0;const{name:l,username:c,verified:m,photoUrl:g,role:p}=o.serviceProviderForm.value,b={name:l,verified:1==o.activeStatus,username:"+91"+c,photoUrl:g,role:p};if(o.form.ids.value){const h={name:l,verified:"true"==m,photoUrl:g,role:p};try{(yield o.service.updateStaffDetail(h,o.form.ids.value).toPromise())&&(o.modalService.hide(),o.loadStaffs())}catch{o.showLoader=!1}}else try{(yield o.service.saveStaff(b).toPromise())&&(o.modalService.hide(),o.loadStaffs())}catch{o.showLoader=!1}}}),this.updateStatus=function(){var l=(0,v.Z)(function*(c,m){const g=C().mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger ms-2"},buttonsStyling:!1});g.fire({title:"Are you sure?",text:"Do you want to update the status?",icon:"warning",confirmButtonText:"Yes, update!",cancelButtonText:"No, cancel!",showCancelButton:!0}).then(function(){var p=(0,v.Z)(function*(b){if(b.value){const h={verified:!0!==c.verified};try{const _=yield o.service.updateStaffDetail(h,c.id).toPromise();if(_){o.modalService.hide(),o.statusBoolean[m]=_.verified,c.verified=_.verified;const w=o.slicedStaffList?.filter(Te=>Te.id===_.id);w.length&&(w[0]=_)}}catch{}}else b.dismiss===C().DismissReason.cancel&&(o.statusBoolean[m]=!0===c.verified,g.fire("Cancelled","Status updation cancelled!","error"))});return function(b){return p.apply(this,arguments)}}())});return function(c,m){return l.apply(this,arguments)}}(),this.loadStaffs=(0,v.Z)(function*(){for(o.itemsPerPage=10,o.currentPage=1;o.statusBoolean.length;)o.statusBoolean.pop();try{const l=yield o.service.getAllStaffs("staff").toPromise();l&&(o.staffList=l,o.slicedStaffList=o.staffList.slice(0,o.itemsPerPage),o.staffList.forEach((c,m)=>{o.statusBoolean.push(1==c.verified)}),o.showLoader=!1)}catch{o.showLoader=!1}}),this.changePage=l=>{this.currentPage=l.page,this.slicedStaffList=this.staffList.slice((l.page-1)*l.itemsPerPage,l.page*l.itemsPerPage)},this.editDataGet=function(){var l=(0,v.Z)(function*(c,m){o.showLoader=!0,o.serviceProviderForm.get("ids")?.setValue(c?.id),o.serviceProviderForm.get("name")?.setValue(c?.name),o.serviceProviderForm.get("photoUrl")?.setValue(c?.photoUrl);const g=atob(c?.username).replace("+91","");o.serviceProviderForm.get("username")?.setValue(g),o.serviceProviderForm.get("verified")?.setValue(!!c?.verified),c?.photoUrl&&(o.upload=!1),o.submitted=!1,o.showLoader=!1,o.modalRef=o.modalService.show(m,{class:"modal-md"}),document.getElementById("add-btn").innerHTML="Update"});return function(c,m){return l.apply(this,arguments)}}(),this.getAtob=l=>l?atob(l):"-",this.delete=function(){var l=(0,v.Z)(function*(c){const m=C().mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger ms-2"},buttonsStyling:!1});m.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!",showCancelButton:!0}).then(function(){var g=(0,v.Z)(function*(p){if(p.value){o.showLoader=!0;try{(yield o.service.deleteStaff(c).toPromise())&&(m.fire("Deleted!","Your data has been deleted.","success"),o.loadStaffs())}catch{o.showLoader=!1}}else p.dismiss===C().DismissReason.cancel&&m.fire("Cancelled","Your data is safe :)","error")});return function(p){return g.apply(this,arguments)}}())});return function(c){return l.apply(this,arguments)}}(),this.total=r.total$}ngOnInit(){this.statusBoolean=[],this.showLoader=!0,this.breadCrumbItems=[{label:"Users"},{label:"Staffs",active:!0}],this.serviceProviderForm=this.fb.group({ids:[""],name:["",[d.kI.required,d.kI.pattern("[A-Za-z ]+")]],username:["",[d.kI.required,d.kI.pattern("^[0-9]{10}$")]],verified:[!0],photoUrl:[""],role:["staff"]}),this.loadStaffs()}get form(){return this.serviceProviderForm.controls}openModal(n){this.submitted=!1,this.activeStatus=!0,this.upload=!0,this.serviceProviderForm.reset(),this.serviceProviderForm.patchValue({role:"staff",verified:!0}),this.modalRef=this.modalService.show(n,{class:"modal-md"})}removeImage(){this.upload=!0,this.image="",this.file=""}onAccept(n){this.showLoader=!0,this.image=n.name,this.file=n;const t=n.currentTarget.files[0],s=new FormData;s.append("file",t),this.utilService.uploadFile(s).subscribe(r=>{if(r?.mediaId){const a=this.utilService.getBaseUrl()+r.mediaId;this.serviceProviderForm.get("photoUrl").setValue(a),this.showLoader=!1}},r=>{this.showLoader=!1})}}y.\u0275fac=function(n){return new(n||y)(e.Y36(x.F0),e.Y36(q.tT),e.Y36(d.qu),e.Y36(k.q),e.Y36(oe.f))},y.\u0275cmp=e.Xpm({type:y,selectors:[["app-service-providers"]],features:[e._Bn([k.q,f.JJ])],decls:37,vars:7,consts:[[4,"ngIf"],[1,"container-fluid"],["title","Staffs",3,"breadcrumbItems"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"row","mb-2"],[1,"col-sm-4"],[1,"col-sm-8"],[1,"text-sm-end"],["type","button",1,"btn","btn-success","btn-rounded","mb-2","me-2",3,"click"],[1,"mdi","mdi-plus","mr-1"],[1,"table-responsive","mb-0"],[1,"table","table-centered","table-nowrap"],[1,"table"],[1,"align-middle"],[2,"vertical-align","middle"],[4,"ngFor","ngForOf"],[1,"pagination","pagination-rounded","justify-content-end","mb-2"],[3,"totalItems","itemsPerPage","ngModel","ngModelChange","pageChanged"],["role","document"],["content",""],["colspan","6",1,"text-center"],[1,"form-check","form-switch","form-switch-lg","mb-3"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange","click"],[1,"d-flex","gap-3"],["href","javascript:void(0);",1,"text-success",3,"click"],[1,"mdi","mdi-pencil","font-size-18"],["href","javascript:void(0);",1,"text-danger",3,"click"],[1,"mdi","mdi-delete","font-size-18"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","close-modal",1,"btn-close",3,"click"],[3,"formGroup","ngSubmit"],[1,"modal-body"],["type","hidden","name","id","value","","formControlName","ids"],[1,"mb-3"],["for","state-field",1,"form-label"],["formControlName","name","placeholder","Enter name","type","textarea","id","customername-field","required","",1,"form-control",3,"ngClass"],["class","invalid-feedback","align","left",4,"ngIf"],["for","commentmessage-input"],["class","form-control","id","name-field",4,"ngIf"],["class","form-group mt-2",3,"ngClass",4,"ngIf"],["for","payment-field",1,"form-label"],["type","checkbox","id","SwitchCheckSizelg","formControlName","verified",1,"form-check-input"],["type","file",3,"change",4,"ngIf"],["class","img-block",4,"ngIf"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button","data-bs-dismiss","modal",1,"btn","btn-light",3,"click"],["type","submit","id","add-btn",1,"btn","btn-success"],["align","left",1,"invalid-feedback"],["id","name-field",1,"form-control"],[1,"form-group","mt-2",3,"ngClass"],[1,"border-end","country-code","px-2"],["formControlName","username","type","text","id","mobile-number","placeholder","9125788800","required","",1,"form-control"],["type","file",3,"change"],[1,"img-block"],["type","button","id","close-btn","ngbTooltip","Remove Image",1,"close",3,"click"],["alt","",1,"avatar-lg","rounded","me-3",3,"src"]],template:function(n,t){if(1&n){const s=e.EpF();e.YNc(0,ie,1,0,"app-loader",0),e.TgZ(1,"div",1),e._UZ(2,"app-page-title",2),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),e._UZ(8,"div",8),e.TgZ(9,"div",9)(10,"div",10)(11,"button",11),e.NdJ("click",function(){e.CHM(s);const a=e.MAs(36);return e.KtG(t.openModal(a))}),e._UZ(12,"i",12),e._uU(13," Add Staffs "),e.qZA()()()(),e.TgZ(14,"div",13)(15,"table",14)(16,"thead",15)(17,"tr")(18,"th",16),e._uU(19,"Sl. No."),e.qZA(),e.TgZ(20,"th",16),e._uU(21,"Staff Name"),e.qZA(),e.TgZ(22,"th",16),e._uU(23,"Contact No"),e.qZA(),e.TgZ(24,"th",16),e._uU(25,"Reg Date"),e.qZA(),e.TgZ(26,"th",16),e._uU(27,"Verification Status"),e.qZA(),e.TgZ(28,"th",16),e._uU(29,"Action"),e.qZA()()(),e.TgZ(30,"tbody",17),e.YNc(31,re,4,0,"ng-container",0),e.YNc(32,se,19,8,"tr",18),e.qZA()()(),e.TgZ(33,"ul",19)(34,"pagination",20),e.NdJ("ngModelChange",function(a){return t.currentPage=a})("pageChanged",function(a){return t.changePage(a)}),e.qZA()()()()()()(),e.YNc(35,_e,35,10,"ng-template",21,22,e.W1O)}2&n&&(e.Q6J("ngIf",t.showLoader),e.xp6(2),e.Q6J("breadcrumbItems",t.breadCrumbItems),e.xp6(29),e.Q6J("ngIf",!(null!=t.slicedStaffList&&t.slicedStaffList.length)),e.xp6(1),e.Q6J("ngForOf",t.slicedStaffList),e.xp6(2),e.Q6J("totalItems",t.staffList.length)("itemsPerPage",t.itemsPerPage)("ngModel",t.currentPage))},dependencies:[f.mk,f.sg,f.O5,I.Qt,d._Y,d.Fj,d.Wl,d.JJ,d.JL,d.Q7,d.sg,d.u,d.On,M.V,B.R,f.uU],styles:[".form-group[_ngcontent-%COMP%]{border:1px solid #ced4da;padding:5px;border-radius:6px;width:auto}.form-group[_ngcontent-%COMP%]:focus{color:#212529;background-color:#fff;border-color:#86b7fe;outline:0;box-shadow:0 0 0 .25rem #0d6efd40}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;width:auto;border:none}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:none}#close-btn[_ngcontent-%COMP%]{right:-100px;top:-50px;position:relative;background-color:#aeaeaf;border-radius:50%}"]});var Y=u(68840);function ve(i,n){1&i&&e._UZ(0,"app-loader")}function be(i,n){1&i&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",17),e._uU(3,"No Users list."),e.qZA()(),e.BQk())}function Ze(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr")(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.ALo(10,"date"),e.qZA(),e.TgZ(11,"td")(12,"div",18)(13,"input",19),e.NdJ("ngModelChange",function(r){const o=e.CHM(t).index,l=e.oxw();return e.KtG(l.statusBoolean[(l.currentPage-1)*l.itemsPerPage+o]=r)})("click",function(){const r=e.CHM(t),a=r.$implicit,o=r.index,l=e.oxw();return e.KtG(l.updateStatus(a,(l.currentPage-1)*l.itemsPerPage+o))}),e.qZA()()()(),e.BQk()}if(2&i){const t=n.$implicit,s=n.index,r=e.oxw();e.xp6(3),e.Oqu((r.currentPage-1)*r.itemsPerPage+s+1),e.xp6(2),e.hij(" ",null==t?null:t.name," "),e.xp6(2),e.Oqu(r.getAtob(null==t?null:t.username)),e.xp6(2),e.Oqu(e.xi3(10,5,null==t?null:t.createdAt,"longDate")),e.xp6(4),e.Q6J("ngModel",r.statusBoolean[(r.currentPage-1)*r.itemsPerPage+s])}}class S{constructor(n,t,s,r){var a=this;this.router=n,this.modalService=t,this.fb=s,this.service=r,this.submitted=!1,this.showLoader=!1,this.usersList=[],this.slicedUsersList=[],this.loadUsers=(0,v.Z)(function*(){for(a.itemsPerPage=10,a.currentPage=1;a.statusBoolean.length;)a.statusBoolean.pop();try{const o=yield a.service.getUsers().toPromise();o&&(a.usersList=o,a.slicedUsersList=a.usersList.slice(0,a.itemsPerPage),a.usersList.forEach((l,c)=>{a.statusBoolean.push(1==l.verified)}),a.showLoader=!1)}catch{a.showLoader=!1}}),this.changePage=o=>{this.currentPage=o.page,this.slicedUsersList=this.usersList.slice((o.page-1)*o.itemsPerPage,o.page*o.itemsPerPage)},this.updateStatus=function(){var o=(0,v.Z)(function*(l,c){const m=C().mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger ms-2"},buttonsStyling:!1});m.fire({title:"Are you sure?",text:"Do you want to update the status?",icon:"warning",confirmButtonText:"Yes, update!",cancelButtonText:"No, cancel!",showCancelButton:!0}).then(function(){var g=(0,v.Z)(function*(p){if(p.value){const b={verified:!0!==l.verified};try{const h=yield a.service.updateUserDetail(b,l.id).toPromise();if(h){a.modalService.hide(),a.statusBoolean[c]=h.verified,l.verified=h.verified;const _=a.slicedUsersList?.filter(w=>w.id===h.id);_.length&&(_[0]=h)}}catch{}}else p.dismiss===C().DismissReason.cancel&&(a.statusBoolean[c]=!0===l.verified,m.fire("Cancelled","Status updation cancelled!","error"))});return function(p){return g.apply(this,arguments)}}())});return function(l,c){return o.apply(this,arguments)}}(),this.getAtob=o=>o?atob(o):"-",this.total=r.total$}ngOnInit(){this.showLoader=!0,this.statusBoolean=[],this.breadCrumbItems=[{label:"Users"},{label:"Users",active:!0}],this.loadUsers()}openModal(n){this.submitted=!1,this.modalRef=this.modalService.show(n,{class:"modal-md"})}}S.\u0275fac=function(n){return new(n||S)(e.Y36(x.F0),e.Y36(q.tT),e.Y36(d.qu),e.Y36(Y.f))},S.\u0275cmp=e.Xpm({type:S,selectors:[["app-users"]],features:[e._Bn([Y.f,f.JJ])],decls:28,vars:7,consts:[[4,"ngIf"],[1,"container-fluid"],["title","Users",3,"breadcrumbItems"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"row","mb-2"],[1,"col-sm-4"],[1,"table-responsive","mb-0"],[1,"table","table-centered","table-nowrap"],[1,"table"],[1,"align-middle"],[2,"vertical-align","middle"],[4,"ngFor","ngForOf"],[1,"pagination","pagination-rounded","justify-content-end","mb-2"],[3,"totalItems","itemsPerPage","ngModel","ngModelChange","pageChanged"],["colspan","5",1,"text-center"],[1,"form-check","form-switch","form-switch-lg","mb-3"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange","click"]],template:function(n,t){1&n&&(e.YNc(0,ve,1,0,"app-loader",0),e.TgZ(1,"div",1),e._UZ(2,"app-page-title",2),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),e._UZ(8,"div",8),e.qZA(),e.TgZ(9,"div",9)(10,"table",10)(11,"thead",11)(12,"tr")(13,"th",12),e._uU(14,"Sl. No."),e.qZA(),e.TgZ(15,"th",12),e._uU(16,"User Name"),e.qZA(),e.TgZ(17,"th",12),e._uU(18,"Contact No"),e.qZA(),e.TgZ(19,"th",12),e._uU(20,"Reg Date"),e.qZA(),e.TgZ(21,"th",12),e._uU(22,"Verification Status"),e.qZA()()(),e.TgZ(23,"tbody",13),e.YNc(24,be,4,0,"ng-container",0),e.YNc(25,Ze,14,8,"ng-container",14),e.qZA()()(),e.TgZ(26,"ul",15)(27,"pagination",16),e.NdJ("ngModelChange",function(r){return t.currentPage=r})("pageChanged",function(r){return t.changePage(r)}),e.qZA()()()()()()()),2&n&&(e.Q6J("ngIf",t.showLoader),e.xp6(2),e.Q6J("breadcrumbItems",t.breadCrumbItems),e.xp6(22),e.Q6J("ngIf",!(null!=t.slicedUsersList&&t.slicedUsersList.length)),e.xp6(1),e.Q6J("ngForOf",t.slicedUsersList),e.xp6(2),e.Q6J("totalItems",t.usersList.length)("itemsPerPage",t.itemsPerPage)("ngModel",t.currentPage))},dependencies:[f.sg,f.O5,I.Qt,d.Wl,d.JJ,d.On,M.V,B.R,f.uU],styles:[".form-group[_ngcontent-%COMP%]{border:1px solid #ced4da;padding:5px;border-radius:6px;width:auto}.form-group[_ngcontent-%COMP%]:focus{color:#212529;background-color:#fff;border-color:#86b7fe;outline:0;box-shadow:0 0 0 .25rem #0d6efd40}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;width:auto;border:none}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:none}"]});const xe=[{path:"admin",component:U},{path:"service-providers",component:y},{path:"users",component:S}];class T{}T.\u0275fac=function(n){return new(n||T)},T.\u0275mod=e.oAB({type:T}),T.\u0275inj=e.cJS({imports:[x.Bz.forChild(xe),x.Bz]});var Ce=u(19668);class A{}A.\u0275fac=function(n){return new(n||A)},A.\u0275mod=e.oAB({type:A}),A.\u0275inj=e.cJS({imports:[f.ez,T,x.Bz,I.u3,d.UX,d.u5,q.zk.forRoot(),Ce.v,F.A0]})}}]);